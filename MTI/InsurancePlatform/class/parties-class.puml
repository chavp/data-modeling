@startuml
!include https://raw.githubusercontent.com/chavp/data-modeling/refs/heads/master/MTI/InsurancePlatform/class/domains-class.puml

!define ENTITIES #9fc4d6ff
!define TYPES #c7e2f0ff
!define VALUES #daecf5ff

left to right direction

' ===== PARTY TYPES PACKAGE =====
package "Mti.Parties.Types" as TypesPkg TYPES {
    class PartyTitle <<PartyTitles>> {
        Index = Code *
        ..
        {field} +IsOrganization: bool // เป็นองค์กรหรือไม่ (true = องค์กร, false = บุคคล)
    }

    class Nationality <<Nationalities>> {
        Index = Code *
    }

    class PartyRoleType <<PartyRoleTypes>> {
        Index = Code *
        ..
        {static} +Insured: string = "INSURED" // ผู้เอาประกันภัย
        {static} +Invoice: string = "INVOICE" // ผู้รับใบกำกับภาษี
    }

    class AssetRoleType <<AssetRoleTypes>> {
        Index = Code *
        ..
        {static} +Owner: string = "OWNER" // เจ้าของทรัพย์สิน
    }
    
    class ContactMechanismType <<ContactMechanismTypes>> {
        Index = Code *
        ..
        {static} +Mobile: string = "MOBILE" // โทรศัพท์มือถือ
        {static} +HomePhone: string = "HOME_PHONE" // โทรศัพท์บ้าน
        {static} +OfficePhone: string = "OFFICE_PHONE" // โทรศัพท์ที่ทำงาน
        {static} +Email: string = "EMAIL" // อีเมล
        {static} +MainAddress: string = "MAIN_ADDRESS" // ที่อยู่หลัก
    }
}

' ===== PARTY VALUES PACKAGE =====
package "Mti.Parties.Values" as ValuesPkg VALUES {
    class PostalAddress <<PostalAddresses>> {
        Index = Name *
        ..
        {field} +Name: string? 300 * // ชื่อที่อยู่ (บ้าน, ที่ทำงาน, ที่อยู่จัดส่ง)
        {field} +HouseNumber: string? 30 // เลขที่บ้าน
        {field} +VillageNumber: string? 30 // หมู่ที่
        {field} +Village: string? 200 // ชื่อหมู่บ้าน/ชุมชน
        {field} +Alley: string? 200 // ตรอก/ซอย
        {field} +Road: string? 200 // ถนน
        {field} +Building: string? 200 // ชื่ออาคาร/คอนโด
        {field} +Room: string? 30 // เลขที่ห้อง
        {field} +Floor: string? 30 // ชั้น
        {field} +Province: string? 200 // จังหวัด
        {field} +District: string? 200 // อำเภอ/เขต
        {field} +SubDistrict: string? 200 // ตำบล/แขวง
        {field} +ZipCode: string? 50 // รหัสไปรษณีย์
        {field} +DisplayName: string { get } "IgnoreDataMember" // ที่อยู่แบบเต็ม (สำหรับแสดงผล)
    }

    class Telecommunication <<Telecommunications>> {
        {field} +AreaCode: string? 5 // รหัสพื้นที่ (02, 031, 032)
        {field} +Number: string? 20 * // หมายเลขโทรศัพท์
        {field} +CountryCode: string? 10 // รหัสประเทศ (+66, +1, +86)
    }

    class ElectronicAddress <<ElectronicAddresses>> {
        {field} +Address: string? 300 * // ที่อยู่อิเล็กทรอนิกส์ (อีเมล, เว็บไซต์, LINE ID)
    }
}

' ===== MAIN PARTY MODELS PACKAGE =====
package "Mti.Parties.Models" as ModelsPkg ENTITIES {
    abstract class Party <<Parties>> {
        {field} +PartyTitleId: Guid? // รหัสคำนำหน้าชื่อ
        {field} +PartyTitle: PartyTitle? // คำนำหน้าชื่อ (นาย, นาง, นางสาว, บริษัท)
        {field} +NationalityId: Guid? // รหัสสัญชาติ
        {field} +Nationality: Nationality? // สัญชาติ
        {field} +AssetRoles: List<AssetRole> = [] // บทบาทเกี่ยวกับทรัพย์สิน
        {field} +ContactMechanisms: List<ContactMechanism> = [] // ช่องทางการติดต่อ
        {field} +PartyContactMechanisms: List<PartyContactMechanism> = [] // ความสัมพันธ์กับช่องทางติดต่อ
    }
    
    class Person <<People>> {
        Index = FirstName, LastName
        Index = CardId
        ..
        {field} +FirstName: string? 200 // ชื่อจริง
        {field} +MiddleName: string? 200 // ชื่อกลาง
        {field} +LastName: string? 300 // นามสกุล
        {field} +CardId: string? 50 // เลขบัตรประชาชน/หนังสือเดินทาง
        {field} +BirthDate: DateOnly? // วันเกิด
        {field} +Height: ushort? // ส่วนสูง (ซม.)
        {field} +Weight: ushort? // น้ำหนัก (กก.)
    }

    abstract class Organization <<Organizations>> {
        Index = Name
        Index = Reference
        ..
        {field} +Name: string? 400 // ชื่อองค์กร/บริษัท
        {field} +Reference: string? 500 // เลขที่อ้างอิง/รหัสองค์กร
    }

    class LegalOrganization <<LegalOrganizations>> {
        Index = FederalTaxIdNumber
        ..
        {field} +FederalTaxIdNumber: string? 50 * // เลขประจำตัวผู้เสียภาษี
    }

    class InformalOrganization <<InformalOrganizations>> {
    }

    abstract class PartyRole <<PartyRoles>> {
        Index = PartyId, PartyRoleTypeId *
        ..
        {field} +PartyId: Guid? * // รหัสของ Party (บุคคล/องค์กร)
        {field} +Party: Party? // ข้อมูล Party
        {field} +PartyRoleTypeId: Guid? * // รหัสประเภทบทบาท
        {field} +PartyRoleType: PartyRoleType? // ประเภทบทบาท (ผู้เอาประกันภัย, ผู้รับผลประโยชน์)
    }

    abstract class InsuredParty <<InsuredParties>> {
    }

    class Insured <<Insureds>> {
    }

    class Invoice <<Invoices>> {
    }

    abstract class Asset <<Assets>> {
        Index = Name
        ..
        {field} +Name: string? 300 * // ชื่อทรัพย์สิน
        {field} +ContactMechanisms: List<ContactMechanism> = [] // ช่องทางการติดต่อ
        {field} +AssetContactMechanisms: List<AssetContactMechanism> = [] // ความสัมพันธ์กับช่องทางติดต่อ
    }

    class Vehicle <<Vehicles>> {
        {field} +Brand: string? 300 // ยี่ห้อรถ (โตโยต้า, ฮอนด้า, เบนซ์)
        {field} +Model: string? 600 // รุ่นรถ (วีออส, ซีวิค, C200)
        {field} +Color: string? 50 // สีรถ
        {field} +RegisterNo: string? 100 // ทะเบียนรถ
        {field} +RegisterProvince: string? 100 // จังหวัดที่จดทะเบียน
        {field} +RegisterYear: ushort? // ปีที่จดทะเบียน
        {field} +Chassis: string? 50 // เลขตัวถัง
        {field} +Cc: float? // ขนาดเครื่องยนต์ (ซีซี)
        {field} +Seat: float? // จำนวนที่นั่ง
        {field} +Weight: ushort? // น้ำหนักรถ (กก.)
        {field} +Tonnage: float? // น้ำหนักบรรทุก (ตัน)
        {field} +Engine: string? 100 // เลขเครื่องยนต์
        {field} +Passenger: ushort? // จำนวนผู้โดยสาร (คน)
    }

    class AssetRole <<AssetRoles>> {
        {field} +PartyId: Guid? * // รหัสของ Party
        {field} +Party: Party? // ข้อมูล Party
        {field} +AssetRoleTypeId: Guid? * // รหัสประเภทบทบาทต่อทรัพย์สิน
        {field} +AssetRoleType: AssetRoleType? // ประเภทบทบาท (เจ้าของ, ผู้ใช้, ผู้เช่า)
        {field} +AssetId: Guid? * // รหัสทรัพย์สิน
        {field} +Asset: Asset? // ข้อมูลทรัพย์สิน
    }

    abstract class ContactMechanism <<ContactMechanisms>> {
        {field} +ContactMechanismTypeId: Guid? * // รหัสประเภทช่องทางติดต่อ
        {field} +ContactMechanismType: ContactMechanismType? // ประเภทช่องทางติดต่อ
        {field} +Parties: List<Party> = [] // รายการ Party ที่ใช้ช่องทางนี้
        {field} +PartyContactMechanisms: List<PartyContactMechanism> = [] // ความสัมพันธ์กับ Party
        {field} +Assets: List<Asset> = [] // รายการ Asset ที่ใช้ช่องทางนี้
        {field} +AssetContactMechanisms: List<AssetContactMechanism> = [] // ความสัมพันธ์กับ Asset
    }

    class PartyContactMechanism <<PartyContactMechanisms>> {
        {field} +PartyId: Guid? * // รหัส Party (บุคคล/องค์กร)
        {field} +Party: Party? // ข้อมูล Party
        {field} +ContactMechanismId: Guid? * // รหัสช่องทางติดต่อ
        {field} +ContactMechanism: ContactMechanism? // ข้อมูลช่องทางติดต่อ
    }

    class AssetContactMechanism <<AssetContactMechanisms>> {
        {field} +AssetId: Guid? * // รหัส Asset (รถ, สิ่งก่อสร้าง, อุปกรณ์ Electronic)
        {field} +Asset: Asset? // ข้อมูล Asset
        {field} +ContactMechanismId: Guid? * // รหัสช่องทางติดต่อ
        {field} +ContactMechanism: ContactMechanism? // ข้อมูลช่องทางติดต่อ
    }
}

' ===== INHERITANCE RELATIONSHIPS =====
DomainModel <|-- Party
DomainModel <|-- Asset
DomainModel <|-- ContactMechanism

' ===== INHERITANCE RELATIONSHIPS =====
EffectiveModel <|-- PartyRole
EffectiveModel <|-- AssetRole
EffectiveModel <|-- PartyContactMechanism
EffectiveModel <|-- AssetContactMechanism

TypeModel <|-- PartyRoleType
TypeModel <|-- AssetRoleType
TypeModel <|-- ContactMechanismType
TypeModel <|-- PartyTitle
TypeModel <|-- Nationality

Party <|-- Person
Party <|-- Organization
Organization <|-- LegalOrganization
Organization <|-- InformalOrganization

PartyRole <|-- InsuredParty
PartyRole <|-- Invoice
InsuredParty <|-- Insured

Asset <|-- Vehicle

ContactMechanism <|-- PostalAddress
ContactMechanism <|-- Telecommunication
ContactMechanism <|-- ElectronicAddress

' ===== ASSOCIATION RELATIONSHIPS =====
Party ..> PartyTitle : uses
Party ..> Nationality : uses
Party ||--o{ AssetRole
Party ||--o{ PartyContactMechanism

PartyRole --> Party
PartyRole --> PartyRoleType

Asset ||--o{ AssetContactMechanism
AssetRole --> Party
AssetRole --> Asset
AssetRole --> AssetRoleType

ContactMechanism --> ContactMechanismType
ContactMechanism ||--o{ PartyContactMechanism
ContactMechanism ||--o{ AssetContactMechanism

@enduml